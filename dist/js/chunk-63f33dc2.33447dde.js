(window["webpackJsonp_admin-system-template"]=window["webpackJsonp_admin-system-template"]||[]).push([["chunk-63f33dc2"],{"0d1c":function(e,t,n){"use strict";var i=n("6573"),a=n.n(i);t["default"]=a.a},"0d7d":function(e,t,n){},"13d9":function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return a}));var i=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",[t("h1",{staticClass:"h1"},[e._t("default")],2)])},a=[]},1748:function(e,t,n){},"1f88":function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return a}));var i=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("h1",{staticClass:"h1"},[e._t("default")],2)},a=[]},"23b8":function(e,t,n){"use strict";var i=n("b758"),a=n.n(i);t["default"]=a.a},2420:function(e,t,n){"use strict";var i=n("1f88"),a=n("23b8"),r=(n("6276"),n("2877")),l=Object(r["a"])(a["default"],i["a"],i["b"],!1,null,"7913c16a",null);t["default"]=l.exports},"26cb":function(e,t,n){"use strict";var i=n("7714"),a=n.n(i);t["default"]=a.a},"3ae4":function(e,t,n){"use strict";var i=n("f6dd"),a=n.n(i);t["default"]=a.a},4082:function(e,t,n){"use strict";var i=n("e57f"),a=n("9d7c"),r=(n("f94f"),n("2877")),l=Object(r["a"])(a["default"],i["a"],i["b"],!1,null,"d4e5c5cc",null);t["default"]=l.exports},4377:function(e,t,n){},4526:function(e,t,n){},6276:function(e,t,n){"use strict";n("8145")},"62df":function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return a}));var i=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",[t("h1",{staticClass:"h1"},[e._t("default")],2)])},a=[]},6573:function(e,t){},"685d":function(e,t,n){"use strict";var i=n("13d9"),a=n("0d1c"),r=(n("93d8"),n("2877")),l=Object(r["a"])(a["default"],i["a"],i["b"],!1,null,"d2801142",null);t["default"]=l.exports},"6d09":function(e,t,n){"use strict";var i=n("f5de"),a=n("3ae4"),r=(n("fba6"),n("2877")),l=Object(r["a"])(a["default"],i["a"],i["b"],!1,null,"a0ed06ce",null);t["default"]=l.exports},7714:function(e,t){},8145:function(e,t,n){},"93d8":function(e,t,n){"use strict";n("c185")},"969e":function(e,t,n){"use strict";n("4377")},"9d7c":function(e,t,n){"use strict";var i=n("c3b7"),a=n.n(i);t["default"]=a.a},a4d5:function(e,t,n){"use strict";n("0d7d")},b3ed7:function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e._self._c;return t("div",[t("OnewLevel",[e._v(" 表单设计器 和 表单渲染器 代码逻辑 ")]),t("TwoLevel",[e._v(" GenerateForm ")]),t("ThreeLevel",[e._v(" ossFileUtil 方法 ")]),t("Content",[e._v(" u左侧区域为字段区，右侧为编辑区 "),t("br"),e._v(" /form/dataPacket/code/crewInterview/tree 初始根据接口返回的所有字段进行分类 "),t("br")]),t("ThreeLevel",[e._v(" 单个字段 ")]),t("prism-editor",{staticClass:"my-editor height-500",attrs:{highlight:e.highlighter,readonly:"","line-numbers":""},model:{value:e.simFiled,callback:function(t){e.simFiled=t},expression:"simFiled"}}),t("Content",[e._v(" preset: 表示是否是预设， 1 即为预设 0 则是预定义字段 "),t("br"),e._v(" Required: 是否必填 "),t("br"),e._v(" paramSource: 表示字典类型， 1 表示接口返回字典， param 则是接口中对应字典的 key 值; "),t("br"),e._v(" 表示 param 是一个数据库写死的 json 字符串，使用需要先 JSON.parse(param) "),t("br")]),t("ThreeLevel",[e._v(" form 上下文 ")]),t("Content",[e._v(" 组件在初始化时会创建一个上下文对象 "),t("br"),e._v(" public ctx: FormCtx = createGenCtx(); "),t("br")]),t("prism-editor",{staticClass:"my-editor height-500",attrs:{highlight:e.highlighter,readonly:"","line-numbers":""},model:{value:e.createGenCtx,callback:function(t){e.createGenCtx=t},expression:"createGenCtx"}}),t("ThreeLevel",[e._v(" createSection ")]),t("Content",[e._v(" createSection 创建渲染区块，每个块都有不同的类型 "),t("br"),e._v(" basic、table、upload、other、evaluate、 "),t("br"),e._v(" 后面渲染器的同时会根据不同的 type 渲染不同的组件 "),t("br")]),t("ThreeLevel",[e._v(" save 保存 ")]),t("prism-editor",{staticClass:"my-editor height-500",attrs:{highlight:e.highlighter,readonly:"","line-numbers":""},model:{value:e.save,callback:function(t){e.save=t},expression:"save"}}),t("Content",[e._v(" 最终 emit 出去的数据如下 demo ")]),t("prism-editor",{staticClass:"my-editor height-500",attrs:{highlight:e.highlighter,readonly:"","line-numbers":""},model:{value:e.demo,callback:function(t){e.demo=t},expression:"demo"}}),t("Content",[e._v(" v2 版本之后，业务端的初始化模板都来自中台下发的数据进行渲染 ")]),t("TwoLevel",[e._v(" MakingForm ")]),t("Content",[e._v(" 根据之前保存的 contentConfig 和对应的 fields 进行渲染，采用的也是 avuejs 遍历 option 的形式 ")]),t("ThreeLevel",[e._v(" 细节 ")]),t("FourLevel",[e._v(" 渲染的时候有 2 个方法 ")]),t("Content",[e._v(" 1. init： 数据在新增的时候 "),t("br"),e._v(" 2. initWithFields： 编辑的时候，这里会多余传入流程中保存的当前审批人的字段权限情况，所以会在组件内部构建字段权限的 map "),t("br"),e._v(" 同样的在初始化时创建了 form 上下文 "),t("br")]),t("FourLevel",[e._v(" init 方法 ")]),t("Content",[e._v(" 数据分类之后会在 computed 中生成最终渲染的顺序 "),t("br"),e._v(" html 中会根据不同的类型渲染不同的组件 "),t("br")]),t("FourLevel",[e._v(" 组件渲染 ")]),t("FourLevel",[e._v(" 航次号组件")]),t("Content",[e._v(" 航次号组件是一个单独开发的组件，具体位置也是在公共组件文件夹下面 "),t("br"),e._v(" 数据格式也是经过特定处理的 "),t("br")]),t("prism-editor",{staticClass:"my-editor height-500",attrs:{highlight:e.highlighter,readonly:"","line-numbers":""},model:{value:e.formatValue,callback:function(t){e.formatValue=t},expression:"formatValue"}}),t("FourLevel",[e._v(" 字段权限 ")]),t("Content",[e._v(" 字段权限会根据流程中返回的字段权限，遍历构建到对象中，最终会和 config 进行合并， "),t("br")])],1)},a=[],r=n("e57a"),l=n("d2f8"),o=n("685d"),u=n("4082"),s=n("2420"),d=n("6d09"),c=(n("cabf"),n("8c7a")),f=(n("cb55"),n("416b"),n("84bf"),{components:{PrismEditor:r["a"],OnewLevel:l["default"],TwoLevel:o["default"],ThreeLevel:u["default"],FourLevel:s["default"],Content:d["default"]},data:()=>({simFiled:'{\n  content: null\n  defaultValue: null\n  edit: 1\n  fieldLength: 5 // 字段长度\n  fieldName: "result3" // 字段对应数据库字段的名称\n  fieldPacketId: null\n  fieldTxt: "面试结果3" // 中文名\n  fieldType: "varchar"\n  formFieldLength: 1\n  formFieldType: "select"// 前端渲染的组件类型\n  groupKey: "面试内容" // 分区名\n  help: null\n  id: "19"\n  multiple: 0\n  packetId: "2"\n  param: "[{"label":"优秀","value":"1"},{"label":"良好","value":"2"},{"label":"一般","value":"3"},{"label":"不称职","value":"4"}]"\n  paramSource: 2\n  placeholder: null\n  preset: 0\n  required: 0\n  sortOrder: 5\n  tableFields: null  \n}',createGenCtx:"export interface FormCtx {\n  // 上下文id\n  id: number\n  // 用来表示是否渲染的标志\n  isInit: boolean\n  // 暂时没用\n  version: string\n  // fields存档\n  fields: PackField[]\n  // fieldId 对应 field 的map， 方便根据id及时拿到field\n  fieldMap: Map<string, PackField>\n  // 对应字典列表\n  dictList: any[]\n  // 排序列表\n  sort: string[]\n  // id对应的设计块\n  data: Map<string, SecCtx>\n  // 设计块组成的数组\n  groups: SecCtx[]\n  other: SecCtx[]\n  // 是否是中台设计器\n  omsType: string\n  sideGroups?: any\n  contentGroups?: any\n\n  // 旧数据的数据适配器\n  initConfigAdapter: (data: ContentConfig[], fields: PackField[], type?: string) => void\n  // 初始化数据\n  initData: (data: SecCtx[], fields: PackField[]) => void\n  pushSecToData: (data: any, needSort?: boolean) => void\n  pushFieldToCtx: (field: PackField) => void\n  // 根据fields进行分组\n  setFields: (fields: PackField[], platform?: PlatForm) => void\n  createOther: (type?: SecType) => any\n  // 创建块\n  createSection: (data: any) => SecCtx\n  // 根据类型过滤\n  filterByType: (type: SecType) => SecCtx[]\n  getGroupByType: (type: SecType) => SecCtx | undefined\n  getGroupById: (id: string) => SecCtx | undefined\n  // 获取排序后的数据块\n  getSortedList: () => SecCtx[]\n  delOtherItem: (id: string) => void\n  // 返回最终保存到后端的配置\n  toConfig: () => any\n  // 兼容旧版本content的方法\n  compatiableOldConfig: () => any\n}",save:"let [config, compatiable] = this.ctx.toConfig()\nlet obj = {\n  info: this.info,\n  formDicts: config.dictList,\n  contentConfig: config.data.map((item: any) => {\n    return {\n      key: item.id,\n      groupKey: item.name,\n      type: item.type,\n      fields: item.field || (item.fields && item.fields.join(',')) || '',\n      tableValue: item.value ? JSON.stringify(item.value) : ''\n    }\n  })\n}\nthis.$emit('save', obj)",demo:'[\n  {\n    "key": "evaluate_113",\n    "groupKey": "整体评价",\n    "type": "evaluate",\n    "fields": "113",\n    "tableValue": ""\n  },\n  {\n    "key": "upload_1126",\n    "groupKey": "附件",\n    "type": "upload",\n    "fields": "114",\n    "tableValue": ""\n  },\n  {\n    "key": "table_115",\n    "groupKey": "培训内容",\n    "type": "table",\n    "fields": "115",\n    "tableValue": "[{"$cellEdit":true,"$index":0,"content":"555556","remark":"","result":"","rowid":"3d2aa82b2857024dc028f312a3e78c4e","$result":""},{"$cellEdit":true,"$index":1,"content":"456564654","remark":"","result":"","rowid":"73e508f0713597479779eaf747b961bd","$result":""},{"$cellEdit":true,"$index":2,"content":"123548","remark":"","result":"","rowid":"7b5e8bcf0383504e73082150fa8f7a43","$result":""}]"\n  },\n  {\n    "key": "basic_56",\n    "groupKey": "基本信息",\n    "type": "basic",\n    "fields": "100,101,102,103,104,105,106,107,108,109,110,111,112",\n    "tableValue": ""\n  }\n]',formatValue:"const formatValue = {\n  voyage_numbers: val,\n  value: option?.label\n}"}),methods:{highlighter(e){return Object(c["highlight"])(e,c["languages"].js)}}}),v=f,b=(n("969e"),n("2877")),p=Object(b["a"])(v,i,a,!1,null,null,null);t["default"]=p.exports},b758:function(e,t){},c185:function(e,t,n){},c3b7:function(e,t){},d2f8:function(e,t,n){"use strict";var i=n("62df"),a=n("26cb"),r=(n("a4d5"),n("2877")),l=Object(r["a"])(a["default"],i["a"],i["b"],!1,null,"7d0be0b6",null);t["default"]=l.exports},e57f:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return a}));var i=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",[t("h1",{staticClass:"h1"},[e._t("default")],2)])},a=[]},f5de:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return a}));var i=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",[t("h1",{staticClass:"h1"},[e._t("default")],2)])},a=[]},f6dd:function(e,t){},f94f:function(e,t,n){"use strict";n("1748")},fba6:function(e,t,n){"use strict";n("4526")}}]);
//# sourceMappingURL=chunk-63f33dc2.33447dde.js.map